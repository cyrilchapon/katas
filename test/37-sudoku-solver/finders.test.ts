import { expect } from 'earljs'

import {
  Board,
  BoardCandidates,
  findHiddenSinglesCandidates,
  findHiddenSetsCandidates,
  getBoard,
  getBoardCandidates
} from '../../src/37-sudoku-solver'

describe('SudokuSolver', () => {
  describe('Finders', () => {
    describe('findHiddenSingleCandidates', () => {
      it('should return consistent', () => {
        const input = [
          [['1', '2'], ['1', '2'], [], [], [], [], [], [], []],
          [['2'], ['2'], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], ['1'], [], [], [], [], [], [], []]
        ]

        const actual = findHiddenSinglesCandidates(input)
        const expected = [
          [['1'], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], ['1'], [], [], [], [], [], [], []]
        ]

        expect(actual).toEqual(expected)
      })
    })

    describe('findHiddenSetsCandidates(2)', () => {
      it('should return consistent', () => {
        const input = [
          [['1', '2', '3'], ['1', '2'], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], ['6', '8', '4']],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], ['3', '9', '7'], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], ['9', '7', '2'], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], ['2', '5', '6', '8']],
          [[], [], [], [], [], [], [], [], []]
        ]

        const actual = findHiddenSetsCandidates(2)(input)
        const expected = {
          row: [
            [['1', '2'], ['1', '2'], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ],
          col: [
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], ['6', '8'], [], [], [], [], [], ['6', '8'], []]
          ],
          square: [
            [['1', '2'], ['1', '2'], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [['9', '7'], [], [], [], [], [], [], [], ['9', '7']],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ]
        }

        expect(actual.row).toEqual(expected.row)
        expect(actual.col).toEqual(expected.col)
        expect(actual.square).toEqual(expected.square)
      })
    })

    describe('findHiddenSetsCandidates(3)', () => {
      it('should return consistent', () => {
        const input = [
          [['1', '2', '3', '4'], ['1', '2', '3'], [], [], [], ['1', '2'], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], ['3', '5', '7', '2', '8']],
          [[], [], [], [], ['7', '6'], [], [], [], []],
          [[], [], [], ['4', '6', '2'], [], [], [], [], []],
          [[], [], [], [], [], ['4', '7', '1'], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], ['8']],
          [[], [], [], [], [], [], [], [], ['8', '5', '3']]
        ]

        const actual = findHiddenSetsCandidates(3)(input)
        const expected = {
          row: [
            [['1', '2', '3'], ['1', '2', '3'], [], [], [], ['1', '2'], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ],
          col: [
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], ['3', '5', '8'], [], [], [], [], ['8'], ['8', '5', '3']]
          ],
          square: [
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], ['7', '6'], [], ['4', '6'], [], [], [], [], ['4', '7']],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ]
        }

        expect(actual.row).toEqual(expected.row)
        expect(actual.col).toEqual(expected.col)
        expect(actual.square).toEqual(expected.square)
      })
    })

    describe('findHiddenSetsCandidates(4)', () => {
      it('should return consistent', () => {
        const input = [
          [['1', '2', '3', '4', '5'], ['1', '2', '3', '4'], ['2', '3'], [], [], ['1', '4'], [], [], []],
          [[], [], [], [], [], [], [], [], []],
          [[], [], [], [], [], [], [], [], ['3', '5', '7', '2', '8']],
          [[], [], [], [], ['7', '6'], ['2', '6'], [], [], []],
          [[], [], [], ['4', '6', '2'], [], [], [], [], []],
          [[], [], [], [], [], ['4', '7', '1'], [], [], []],
          [[], [], [], [], [], [], [], [], ['3', '7', '1']],
          [[], [], [], [], [], [], [], [], ['8', '5']],
          [[], [], [], [], [], [], [], [], ['8', '5', '3']]
        ]

        const actual = findHiddenSetsCandidates(4)(input)
        const expected = {
          row: [
            [['1', '2', '3', '4'], ['1', '2', '3', '4'], ['2', '3'], [], [], ['1', '4'], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ],
          col: [
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], ['3', '5', '7', '8'], [], [], [], ['3', '7'], ['8', '5'], ['8', '5', '3']]
          ],
          square: [
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], ['7', '6'], ['2', '6'], ['4', '6', '2'], [], [], [], [], ['4', '7']],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []],
            [[], [], [], [], [], [], [], [], []]
          ]
        }

        expect(actual.row).toEqual(expected.row)
        expect(actual.col).toEqual(expected.col)
        expect(actual.square).toEqual(expected.square)
      })
    })
  })
})